<!DOCTYPE html>  
<html lang="en">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">  
    <title>Brain Arcade v6: Galaxy Edition</title>  
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;900&family=Poppins:wght@400;600&display=swap" rel="stylesheet">  
    <style>  
        :root {  
            --bg-dark: #05050a;  
            --cyan: #00f2ea;  
            --purple: #bf00ff;  
            --font-head: 'Orbitron', sans-serif;  
            --font-body: 'Poppins', sans-serif;  
        }  
        body { margin: 0; font-family: var(--font-body); background-color: var(--bg-dark); color: #fff; overflow: hidden; height: 100vh; }  

        /* Background Effects */
        .nebula-bg { position: fixed; top: 0; left: 0; width: 100vw; height: 100%; z-index: -2; background: radial-gradient(circle at 50% 50%, #1a0b2e, #05050a 80%); }  
        .star-field { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; opacity: 0.6; background-image: radial-gradient(2px 2px at 40% 40%, rgba(255,255,255,0.8), transparent); background-size: 300px 300px; animation: drift 60s linear infinite; }  
        @keyframes drift { from { background-position: 0 0; } to { background-position: 0 300px; } }  
        @keyframes float { 0% {transform:translateY(0px);} 50% {transform:translateY(-10px);} 100% {transform:translateY(0px);} }  
        .float-anim { animation: float 3s ease-in-out infinite; }  

        /* Layout */
        #app { width: 100vw; height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; }  
        h1 { font-family: var(--font-head); font-size: 2.8rem; margin: 10px 0; background: linear-gradient(to right, var(--cyan), var(--purple)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-shadow: 0px 0px 30px rgba(191, 0, 255, 0.5); text-align: center; }  

        /* Menu Grid */
        .menu-scroll { width: 100%; flex: 1; overflow-y: auto; display: flex; flex-direction: column; align-items: center; padding-bottom: 20px; }  
        .menu-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(135px, 1fr)); gap: 15px; width: 100%; max-width: 500px; padding: 10px; box-sizing: border-box; }  
        .game-card { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); padding: 15px; border-radius: 16px; text-align: center; cursor: pointer; transition: 0.2s; backdrop-filter: blur(5px); box-shadow: 0 4px 15px rgba(0,0,0,0.4); }  
        .game-card:active { transform: scale(0.96); background: rgba(255,255,255,0.12); }  
        .game-card h3 { margin: 0; font-size: 0.9rem; color: var(--cyan); font-family: var(--font-head); }  
        .hs-label { font-size: 0.6rem; color: #aaa; margin-top: 8px; display: block; font-weight: bold; }  
        .hs-val { color: #fff; font-size: 1.1rem; font-weight: bold; font-family: var(--font-head); text-shadow: 0 0 10px rgba(255,255,255,0.3); }  

        /* Game Container (Iframe) */
        #game-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #05050a; z-index: 100; display: none; }
        iframe { width: 100%; height: 100%; border: none; }
    </style>
</head>  
<body>  
<div id="app">  
    <div class="nebula-bg"></div>  
    <div class="star-field"></div>  
            <div style="width:100%; max-width:500px; margin-top:10px; margin-bottom:15px; padding:0 20px; box-sizing:border-box; text-align: center;">
            
            <p style="color:#FFD700; font-family:var(--font-head); font-size:0.9rem; margin:0 0 8px 0; text-shadow:0 0 10px rgba(255, 215, 0, 0.5); letter-spacing: 1px;">
                Install apps üëá now
            </p>

            <div style="display:flex; gap:10px;">
                <button id="install-btn" class="float-anim" style="display:none; flex:1; align-items:center; justify-content:center; padding:8px 10px; background: linear-gradient(45deg, #00f2ea, #bf00ff); box-shadow: 0 4px 15px rgba(0, 242, 234, 0.3); border:none; border-radius:20px; color:#fff; font-family:var(--font-head); font-weight: 900; font-size:0.75rem; transition:0.2s; cursor:pointer;">
    <span style="font-size:1.2rem; margin-right:5px;">‚¨áÔ∏è</span>
    INSTALL APP
</button>

                <a href="https://twolife-v1.github.io/my/updater.html" target="_blank" class="float-anim" 
                   style="flex:1; text-decoration:none; display:flex; align-items:center; justify-content:center; 
                          padding:8px 10px;
                          background: linear-gradient(45deg, #FFD700, #FFA500);
                          box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
                          border:none; border-radius:20px; color:#05050a; font-family:var(--font-head); 
                          font-weight: 900; font-size:0.75rem; transition:0.2s;">
                   <img src="icon-512.png" style="height:24px; width:24px; margin-right:8px; border-radius:5px; vertical-align:middle;">
                   WaktuSolat
                </a>

                <a href="https://pipahcookiesapp.github.io/com/" target="_blank" class="float-anim" 
                   style="flex:1; text-decoration:none; display:flex; align-items:center; justify-content:center; 
                          padding:8px 10px;
                          background: linear-gradient(45deg, #FFD700, #FFA500);
                          box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
                          border:none; border-radius:20px; color:#05050a; font-family:var(--font-head); 
                          font-weight: 900; font-size:0.75rem; transition:0.2s; animation-delay:0.3s;">
                   <img src="icon.png" style="height:24px; width:24px; margin-right:8px; border-radius:5px; vertical-align:middle;">
                   PipahCookies
                </a>
            </div>
        </div>

    
    <div style="padding: 10px 0;">  
        <h1>BRAIN<br>ARCADE</h1>  
        <p style="text-align:center; opacity: 0.6; font-size: 0.9rem; margin: 0; letter-spacing: 3px; color:var(--cyan);">PLATFORM HUB</p>  
    </div>  

    <div class="menu-scroll">  
        
        
        <div class="menu-grid">  
            <div class="game-card float-anim" onclick="launchGame('cosmic.html')" style="border-top: 3px solid #ff00ff; box-shadow: 0 0 20px rgba(255,0,255,0.3); grid-column: span 2;">  
                <h3 style="color:#ff00ff; font-size: 1.2rem;">COSMIC GLIDE 3D</h3>  
                <span class="hs-label">HIGH SCORE</span><span id="hs-glider" class="hs-val">0</span>  
            </div>  

            <div class="game-card float-anim" onclick="launchGame('arcade.html?game=memory')" style="border-top: 3px solid #4facfe; animation-delay: 0.1s;">  
                <h3>MEMORY MATRIX</h3> <span class="hs-label">BEST</span><span id="hs-memory" class="hs-val">0</span>  
            </div>  
            <div class="game-card float-anim" onclick="launchGame('arcade.html?game=math')" style="border-top: 3px solid #bf00ff; animation-delay: 0.2s;">  
                <h3>QUICK MATH</h3> <span class="hs-label">BEST</span><span id="hs-math" class="hs-val">0</span>  
            </div>  
            <div class="game-card float-anim" onclick="launchGame('arcade.html?game=color')" style="border-top: 3px solid #f1c40f; animation-delay: 0.3s;">  
                <h3>COLOR TRAP</h3> <span class="hs-label">BEST</span><span id="hs-color" class="hs-val">0</span>  
            </div>  
            <div class="game-card float-anim" onclick="launchGame('arcade.html?game=odd')" style="border-top: 3px solid #fff; animation-delay: 0.4s;">  
                <h3>ODD ONE OUT</h3> <span class="hs-label">BEST</span><span id="hs-odd" class="hs-val">0</span>  
            </div>  
            <div class="game-card float-anim" onclick="launchGame('arcade.html?game=order')" style="border-top: 3px solid #4facfe; animation-delay: 0.5s;">  
                <h3>ORDER CHAOS</h3> <span class="hs-label">BEST</span><span id="hs-order" class="hs-val">0</span>  
            </div>  
            <div class="game-card float-anim" onclick="launchGame('arcade.html?game=dash')" style="border-top: 3px solid #00e676; animation-delay: 0.6s;">  
                <h3>DIRECTION DASH</h3> <span class="hs-label">BEST</span><span id="hs-dash" class="hs-val">0</span>  
            </div>  
            <div class="game-card float-anim" onclick="launchGame('arcade.html?game=reflex')" style="border-top: 3px solid #ff0080; animation-delay: 0.7s;">  
                <h3>RAPID REFLEX</h3> <span class="hs-label">BEST</span><span id="hs-reflex" class="hs-val">0</span>  
            </div>  
            <div class="game-card float-anim" onclick="launchGame('arcade.html?game=runner')" style="border-top: 3px solid #bf00ff; animation-delay: 0.8s;">  
                <h3>ROCKET RUN</h3> <span class="hs-label">BEST</span><span id="hs-runner" class="hs-val">0</span>  
            </div>  
        </div>  
    </div>  

    <div id="game-layer">
        <iframe id="game-frame" src=""></iframe>
    </div>
</div>  
    <link rel="manifest" href="manifest.json">

<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('sw.js')
      .then(() => console.log('Service Worker Registered'))
      .catch((err) => console.log('SW Failed:', err));
  }
</script>


<script>  
    // Variable to store the browser's install prompt
let deferredPrompt;
const installBtn = document.getElementById('install-btn');

// 1. Listen for the browser saying "This app can be installed!"
window.addEventListener('beforeinstallprompt', (e) => {
    // Prevent the mini-infobar from appearing on mobile
    e.preventDefault();
    // Save the event so we can trigger it later
    deferredPrompt = e;
    // Reveal the button we added in Step 1
    installBtn.style.display = 'flex';
});

// 2. Handle the button click
installBtn.addEventListener('click', async () => {
    if (deferredPrompt) {
        // Show the native browser install prompt
        deferredPrompt.prompt();
        // Wait for the user to respond
        const { outcome } = await deferredPrompt.userChoice;
        console.log(`User response: ${outcome}`);
        // We can't use the prompt again, so clear it
        deferredPrompt = null;
        // Hide the button since it's installed or dismissed
        installBtn.style.display = 'none';
    }
});

// 3. Optional: Hide button if app is already installed
window.addEventListener('appinstalled', () => {
    installBtn.style.display = 'none';
    console.log('App successfully installed');
});

    const scores = { memory:0, math:0, color:0, odd:0, order:0, dash:0, reflex:0, runner:0, glider:0 };  
    
    function loadScores() {  
        try {  
            let s = localStorage.getItem('brainArcadeV6');  
            if(s) Object.assign(scores, JSON.parse(s));  
        } catch(e) {}  
        for(let k in scores) { let e=document.getElementById(`hs-${k}`); if(e) e.innerText=scores[k]; }  
    }  

    function launchGame(url) {
        const layer = document.getElementById('game-layer');
        const frame = document.getElementById('game-frame');
        frame.src = url;
        layer.style.display = 'block';
    }

    // Listen for "Exit" message from iframe
    window.addEventListener('message', function(event) {
        if(event.data === 'close_game') {
            document.getElementById('game-layer').style.display = 'none';
            document.getElementById('game-frame').src = '';
            loadScores(); // Refresh scores on menu
        }
    });

    loadScores();
    
</script>  
</body>  
</html>
